(function(a){var b={init:function(){var b=a('form.register');a('.user-role input[type=radio]',b).on('change',this.showSellerForm),a('.tc_check_box',b).on('click',this.onTOC),a('#shop-phone',b).keydown(this.ensurePhoneNumber),a('#company-name',b).on('focusout',this.generateSlugFromCompany),a('#seller-url',b).keydown(this.constrainSlug),a('#seller-url',b).keyup(this.renderUrl),a('#seller-url',b).on('focusout',this.checkSlugAvailability),this.validationLocalized()},validate:function(b){a('form.register').validate({errorPlacement:function(b,c){var d=a(c).closest('.form-group');d.addClass('has-error').append(b)},success:function(c,b){a(b).closest('.form-group').removeClass('has-error')},submitHandler:function(a){a.submit()}})},showSellerForm:function(){var b=a(this).val();b==='seller'?(a('.show_if_seller').find('input, select').removeAttr('disabled'),a('.show_if_seller').slideDown(),a('.tc_check_box').length>0&&a('button[name=register]').attr('disabled','disabled')):(a('.show_if_seller').find('input, select').attr('disabled','disabled'),a('.show_if_seller').slideUp(),a('.tc_check_box').length>0&&a('button[name=register]').removeAttr('disabled'))},onTOC:function(){var b=a(this).val();a(this).prop("checked")?(a('input[name=register]').removeAttr('disabled'),a('button[name=register]').removeAttr('disabled'),a('input[name=dokan_migration]').removeAttr('disabled')):(a('input[name=register]').attr('disabled','disabled'),a('button[name=register]').attr('disabled','disabled'),a('input[name=dokan_migration]').attr('disabled','disabled'))},ensurePhoneNumber:function(b){if(a.inArray(b.keyCode,[46,8,9,27,13,91,107,109,110,187,189,190])!==-1||b.keyCode==65&&b.ctrlKey===!0||b.keyCode>=35&&b.keyCode<=39)return;(b.shiftKey||b.keyCode<48||b.keyCode>57)&&(b.keyCode<96||b.keyCode>105)&&b.preventDefault()},generateSlugFromCompany:function(){var b=getSlug(a(this).val());a('#seller-url').val(b),a('#url-alart').text(b),a('#seller-url').focus()},constrainSlug:function(b){var c=a(this).val();if(a.inArray(b.keyCode,[46,8,9,27,13,91,109,110,173,189,190])!==-1||b.keyCode==65&&b.ctrlKey===!0||b.keyCode>=35&&b.keyCode<=39)return;(b.shiftKey||(b.keyCode<65||b.keyCode>90)&&(b.keyCode<48||b.keyCode>57))&&(b.keyCode<96||b.keyCode>105)&&b.preventDefault()},checkSlugAvailability:function(){var b=a(this),d={action:'shop_url',url_slug:b.val(),_nonce:dokan.nonce},c;if(b.val()==='')return;c=b.closest('.form-row'),c.block({message:null,overlayCSS:{background:'#fff url('+dokan.ajax_loader+') no-repeat center',opacity:.6}}),a.post(dokan.ajaxurl,d,function(b){b.success===!0?(a('#url-alart').removeClass('text-danger').addClass('text-success'),a('#url-alart-mgs').removeClass('text-danger').addClass('text-success').text(dokan.seller.available)):(a('#url-alart').removeClass('text-success').addClass('text-danger'),a('#url-alart-mgs').removeClass('text-success').addClass('text-danger').text(dokan.seller.notAvailable)),c.unblock()})},renderUrl:function(){a('#url-alart').text(a(this).val())},validationLocalized:function(){var b=DokanValidateMsg;b.maxlength=a.validator.format(b.maxlength_msg),b.minlength=a.validator.format(b.minlength_msg),b.rangelength=a.validator.format(b.rangelength_msg),b.range=a.validator.format(b.range_msg),b.max=a.validator.format(b.max_msg),b.min=a.validator.format(b.min_msg),a.validator.messages=b}};a(function(){var c,d;b.init(),a('.show_if_seller').find('input, select').attr('disabled','disabled'),c=a('.woocommerce ul').hasClass('woocommerce-error')&&!a('.show_if_seller').is(':hidden'),c&&(d=a('form.register'),a('.user-role input[type=radio]',d).trigger('change')),a('.tc_check_box').length>0&&(a('input[name=dokan_migration]').attr('disabled','disabled'),a('input[name=register]').attr('disabled','disabled'))})})(jQuery)