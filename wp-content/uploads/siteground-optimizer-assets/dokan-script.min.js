jQuery(function(a){a('.tips').tooltip(),a('ul.order-status').on('click','a.dokan-edit-status',function(b){return a(this).addClass('dokan-hide').closest('li').next('li').removeClass('dokan-hide'),!1}),a('ul.order-status').on('click','a.dokan-cancel-status',function(b){return a(this).closest('li').addClass('dokan-hide').prev('li').find('a.dokan-edit-status').removeClass('dokan-hide'),!1}),a('form#dokan-order-status-form').on('submit',function(d){d.preventDefault();var c=a(this),b=c.closest('li');b.block({message:null,overlayCSS:{background:'#fff url('+dokan.ajax_loader+') no-repeat center',opacity:.6}}),a.post(dokan.ajaxurl,c.serialize(),function(a){if(b.unblock(),a.success){var c=b.prev();b.addClass('dokan-hide'),c.find('label').replaceWith(a.data),c.find('a.dokan-edit-status').removeClass('dokan-hide')}else alert(a.data)})}),a('form#add-order-note').on('submit',function(b){if(b.preventDefault(),!a('textarea#add-note-content').val())return;return a('#dokan-order-notes').block({message:null,overlayCSS:{background:'#fff url('+dokan.ajax_loader+') no-repeat center',opacity:.6}}),a.post(dokan.ajaxurl,a(this).serialize(),function(b){a('ul.order_notes').prepend(b),a('#dokan-order-notes').unblock(),a('#add-note-content').val('')}),!1}),a('#dokan-order-notes').on('click','a.delete_note',function(){var b=a(this).closest('li.note'),c;return a('#dokan-order-notes').block({message:null,overlayCSS:{background:'#fff url('+dokan.ajax_loader+') no-repeat center',opacity:.6}}),c={action:'dokan_delete_order_note',note_id:a(b).attr('rel'),security:a('#delete-note-security').val()},a.post(dokan.ajaxurl,c,function(c){a(b).remove(),a('#dokan-order-notes').unblock()}),!1}),a('.order_download_permissions').on('click','button.grant_access',function(){var b=a(this),c=a('select.grant_access_id').val(),d;if(!c)return;return a('.order_download_permissions').block({message:null,overlayCSS:{background:'#fff url('+dokan.ajax_loader+') no-repeat center',opacity:.6}}),d={action:'dokan_grant_access_to_download',product_ids:c,loop:a('.order_download_permissions .panel').size(),order_id:b.data('order-id'),security:b.data('nonce')},a.post(dokan.ajaxurl,d,function(b){b?a('#accordion').append(b):alert('Could not grant access - the user may already have permission for this file or billing email is not set. Ensure the billing email is set, and the order has been saved.'),a('.datepicker').datepicker(),a('.order_download_permissions').unblock()}),!1}),a('.order_download_permissions').on('click','button.revoke_access',function(h){var f,b,c,d,g,e;return h.preventDefault(),f=confirm('Are you sure you want to revoke access to this download?'),f&&(b=a(this),c=b.closest('.dokan-panel'),d=b.attr('rel').split(",")[0],g=b.attr('rel').split(",")[1],d>0?(a(c).block({message:null,overlayCSS:{background:'#fff url('+dokan.ajax_loader+') no-repeat center',opacity:.6}}),e={action:'dokan_revoke_access_to_download',product_id:d,download_id:g,order_id:b.data('order-id'),permission_id:b.data('permission-id'),security:b.data('nonce')},a.post(dokan.ajaxurl,e,function(b){a(c).fadeOut('300',function(){a(c).remove()})})):a(c).fadeOut('300',function(){a(c).remove()})),!1})}),function(a){var b={init:function(){let e={d:'dd',D:'D',j:'d',l:'DD',F:'MM',m:'mm',M:'M',n:'m',o:'yy',Y:'yy',y:'y'},b=0,c='',d='';for(b=0;b<dokan.i18n_date_format.length;b++)c=dokan.i18n_date_format[b],c in e?d+=e[c]:d+=c;a("#shipped-date").datepicker({dateFormat:d}),a('body').on('click','#dokan-add-tracking-number',this.showTrackingForm),a('body').on('click','#dokan-cancel-tracking-note',this.cancelTrackingForm),a('body').on('click','#add-tracking-details',this.insertShippingTrackingInfo),a('#woocommerce-order-items').on('click','button.refund-items',this.refund_items).on('click','.cancel-action',this.cancel).on('click','button.do-api-refund, button.do-manual-refund',this.refunds.do_refund).on('change','.refund input.refund_line_total, .refund input.refund_line_tax',this.refunds.input_changed).on('change keyup','.wc-order-refund-items #refund_amount',this.refunds.amount_changed).on('change','input.refund_order_item_qty',this.refunds.refund_quantity_changed).on('keyup','.woocommerce_order_items .split-input input:eq(0)',function(){var b=a(this).next();(b.val()===''||b.is('.match-total'))&&b.val(a(this).val()).addClass('match-total')}).on('keyup','.woocommerce_order_items .split-input input:eq(1)',function(){a(this).removeClass('match-total')})},showTrackingForm:function(b){b.preventDefault();var c=a(this);c.closest('div').find('form#add-shipping-tracking-form').slideDown(300,function(){a(this).removeClass('dokan-hide')})},cancelTrackingForm:function(b){b.preventDefault();var c=a(this);c.closest('form#add-shipping-tracking-form').slideUp(300,function(){a(this).addClass('dokan-hide')})},insertShippingTrackingInfo:function(b){b.preventDefault();var c={shipping_provider:a('#shipping_provider').val(),shipping_number:a('#tracking_number').val(),shipped_date:a('#shipped-date').val(),action:a('#action').val(),post_id:a('#post-id').val(),security:a('#security').val()};return a('#dokan-order-notes').block({message:null,overlayCSS:{background:'#fff url('+dokan.ajax_loader+') no-repeat center',opacity:.6}}),a.post(dokan.ajaxurl,c,function(b){a('ul.order_notes').prepend(b),a('#dokan-order-notes').unblock(),a('form#add-shipping-tracking-form').find("input[type=text], textarea").val("")}),!1},block:function(){a('#woocommerce-order-items').block({message:null,overlayCSS:{background:'#fff',opacity:.6}})},unblock:function(){a('#woocommerce-order-items').unblock()},reload_items:function(){var c={order_id:dokan_refund.post_id,action:'dokan_load_order_items',security:dokan_refund.order_item_nonce};b.block(),a.ajax({url:dokan_refund.ajax_url,data:c,type:'POST',success:function(b){a('.dokan-panel-default #woocommerce-order-items').empty(),a('.dokan-panel-default #woocommerce-order-items').append(b)}})},refund_items:function(){return a('div.wc-order-refund-items').slideDown(),a('div.wc-order-bulk-actions').slideUp(),a('div.wc-order-totals-items').slideUp(),a('#woocommerce-order-items div.refund').show(),a('.wc-order-edit-line-item .wc-order-edit-line-item-actions').hide(),!1},cancel:function(){return a(this).closest('div.wc-order-data-row').slideUp(),a('div.wc-order-bulk-actions').slideDown(),a('div.wc-order-totals-items').slideDown(),a('#woocommerce-order-items div.refund').hide(),a('.wc-order-edit-line-item .wc-order-edit-line-item-actions').show(),'true'===a(this).attr('data-reload')&&b.reload_items(),!1},refunds:{do_refund:function(){var f,g,d,e,c,h;b.block(),window.confirm(dokan_refund.i18n_do_refund)?(f=a('input#refund_amount').val(),g=a('input#refund_reason').val(),d={},e={},c={},a('.refund input.refund_order_item_qty').each(function(c,b){a(b).closest('tr').data('order_item_id')&&b.value&&(d[a(b).closest('tr').data('order_item_id')]=b.value)}),a('.refund input.refund_line_total').each(function(c,b){a(b).closest('tr').data('order_item_id')&&(e[a(b).closest('tr').data('order_item_id')]=accounting.unformat(b.value,dokan_refund.mon_decimal_point))}),a('.refund input.refund_line_tax').each(function(e,b){if(a(b).closest('tr').data('order_item_id')){var d=a(b).data('tax_id');c[a(b).closest('tr').data('order_item_id')]||(c[a(b).closest('tr').data('order_item_id')]={}),c[a(b).closest('tr').data('order_item_id')][d]=accounting.unformat(b.value,dokan_refund.mon_decimal_point)}}),h={action:'dokan_refund_request',order_id:dokan_refund.post_id,refund_amount:f,refund_reason:g,line_item_qtys:JSON.stringify(d,null,''),line_item_totals:JSON.stringify(e,null,''),line_item_tax_totals:JSON.stringify(c,null,''),api_refund:a(this).is('.do-api-refund'),restock_refunded_items:a('#restock_refunded_items:checked').size()?'true':'false',security:dokan_refund.order_item_nonce},a.post(dokan_refund.ajax_url,h,function(a){a.data.message?window.alert(a.data.message):null,b.reload_items()}).fail(function(c){var d=[],e;c.responseJSON.data&&(e=c.responseJSON.data,a.isArray(e)?d=c.responseJSON.data.map(function(a){return a.message}):d.push(e)),window.alert(d.join(' ')),b.unblock()})):b.unblock()},input_changed:function(){var b=0,c=a('.woocommerce_order_items').find('tr.item, tr.fee, tr.shipping');c.each(function(){var c=a(this),d=c.find('.refund input:not(.refund_order_item_qty)');d.each(function(d,c){b+=parseFloat(accounting.unformat(a(c).val()||0,dokan_refund.mon_decimal_point))})}),a('#refund_amount').val(accounting.formatNumber(b,dokan_refund.currency_format_num_decimals,'',dokan_refund.mon_decimal_point)).change()},amount_changed:function(){var b=accounting.unformat(a(this).val(),dokan_refund.mon_decimal_point);a('button .wc-order-refund-amount .amount').text(accounting.formatMoney(b,{symbol:dokan_refund.currency_format_symbol,decimal:dokan_refund.currency_format_decimal_sep,thousand:dokan_refund.currency_format_thousand_sep,precision:dokan_refund.currency_format_num_decimals,format:dokan_refund.currency_format}))},refund_quantity_changed:function(){var b=a(this).closest('tr.item'),d=b.find('input.quantity').val(),c=a(this).val(),e=a('input.line_total',b),f=a('input.refund_line_total',b),g=accounting.unformat(e.attr('data-total'),dokan_refund.mon_decimal_point)/d;f.val(parseFloat(accounting.formatNumber(g*c,dokan_refund.rounding_precision,'')).toString().replace('.',dokan_refund.mon_decimal_point)).change(),a('td.line_tax',b).each(function(){var f=a('input.line_tax',a(this)),b=a('input.refund_line_tax',a(this)),e=accounting.unformat(f.attr('data-total_tax'),dokan_refund.mon_decimal_point)/d;0<e?b.val(parseFloat(accounting.formatNumber(e*c,dokan_refund.rounding_precision,'')).toString().replace('.',dokan_refund.mon_decimal_point)).change():b.val(0).change()}),c>0?a('#restock_refunded_items').closest('tr').show():(a('#restock_refunded_items').closest('tr').hide(),a('.woocommerce_order_items input.refund_order_item_qty').each(function(){a(this).val()>0&&a('#restock_refunded_items').closest('tr').show()})),a(this).trigger('refund_quantity_changed')}}};b.init(),a('#dokan-filter-customer').filter(':not(.enhanced)').each(function(){var d={allowClear:!!a(this).data('allow_clear'),placeholder:a(this).data('placeholder'),minimumInputLength:a(this).data('minimum_input_length')?a(this).data('minimum_input_length'):'1',escapeMarkup:function(a){return a},language:{errorLoading:function(){return dokan.i18n_searching},inputTooLong:function(a){var b=a.input.length-a.maximum;return 1===b?dokan.i18n_input_too_long_1:dokan.i18n_input_too_long_n.replace('%qty%',b)},inputTooShort:function(a){var b=a.minimum-a.input.length;return 1===b?dokan.i18n_input_too_short_1:dokan.i18n_input_too_short_n.replace('%qty%',b)},loadingMore:function(){return dokan.i18n_load_more},maximumSelected:function(a){return a.maximum===1?dokan.i18n_selection_too_long_1:dokan.i18n_selection_too_long_n.replace('%qty%',a.maximum)},noResults:function(){return dokan.i18n_no_matches},searching:function(){return dokan.i18n_searching}},ajax:{url:dokan.ajaxurl,dataType:'json',delay:1e3,data:function(b){return{term:b.term,action:'dokan_json_search_vendor_customers',security:dokan.search_customer_nonce,exclude:a(this).data('exclude')}},processResults:function(b){var c=[];return b&&a.each(b,function(a,b){c.push({id:a,text:b})}),{results:c}},cache:!0}},b,c;a(this).select2(d).addClass('enhanced'),a(this).data('sortable')&&(b=a(this),c=a(this).next('.select2-container').find('ul.select2-selection__rendered'),c.sortable({placeholder:'ui-state-highlight select2-selection__choice',forcePlaceholderSize:!0,items:'li:not(.select2-search__field)',tolerance:'pointer',stop:function(){a(c.find('.select2-selection__choice').get().reverse()).each(function(){var c=a(this).data('data').id,d=b.find('option[value="'+c+'"]')[0];b.prepend(d)})}}))})}(jQuery),function(a){var e=a('#variants-holder'),f=a('#product_image_gallery'),g=a('#product_images_container ul.product_images'),b={init:function(){product_type='simple',a('.product-edit-container').on('click','.dokan-section-heading',this.toggleProductSection),a('.product-edit-container').on('click','input[type=checkbox]#_downloadable',this.downloadable),a('.product-edit-container').on('click','a.sale-schedule',this.showDiscountSchedule),a('body, #dokan-product-images').on('click','a.add-product-images',this.gallery.addImages),a('body, #dokan-product-images').on('click','a.action-delete',this.gallery.deleteImage),this.gallery.sortable(),a('body, .product-edit-container').on('click','a.dokan-feat-image-btn',this.featuredImage.addImage),a('body, .product-edit-container').on('click','a.dokan-remove-feat-image',this.featuredImage.removeImage),a('body, #variable_product_options').on('click','.sale_schedule',this.saleSchedule),a('body, #variable_product_options').on('click','.cancel_sale_schedule',this.cancelSchedule),a('.product-edit-container').on('change','input[type=checkbox]#_manage_stock',this.showManageStock),a('.product-edit-container').on('click','a.upload_file_button',this.fileDownloadable),a('body').on('click','a.insert-file-row',function(){return a(this).closest('table').find('tbody').append(a(this).data('row')),!1}),a('body').on('click','a.dokan-product-delete',function(){return a(this).closest('tr').remove(),!1}),a('body').on('submit','form.dokan-product-edit-form',this.inputValidate),a('.dokan-product-listing').on('click','a.dokan-add-new-product',this.addProductPopup),this.loadSelect2(),this.bindProductTagDropdown(),this.attribute.sortable(),this.checkProductPostboxToggle(),a('.product-edit-container .dokan-product-attribute-wrapper').on('click','a.dokan-product-toggle-attribute, .dokan-product-attribute-heading',this.attribute.toggleAttribute),a('.product-edit-container .dokan-product-attribute-wrapper').on('click','a.add_new_attribute',this.attribute.addNewAttribute),a('.product-edit-container .dokan-product-attribute-wrapper').on('keyup','input.dokan-product-attribute-name',this.attribute.dynamicAttrNameChange),a('.dokan-product-attribute-wrapper ul.dokan-attribute-option-list').on('click','button.dokan-select-all-attributes',this.attribute.selectAllAttr),a('.dokan-product-attribute-wrapper ul.dokan-attribute-option-list').on('click','button.dokan-select-no-attributes',this.attribute.selectNoneAttr),a('.dokan-product-attribute-wrapper ul.dokan-attribute-option-list').on('click','button.dokan-add-new-attribute',this.attribute.addNewExtraAttr),a('.product-edit-container .dokan-product-attribute-wrapper').on('click','a.dokan-product-remove-attribute',this.attribute.removeAttribute),a('.product-edit-container .dokan-product-attribute-wrapper').on('click','a.dokan-save-attribute',this.attribute.saveAttribute),a('body').on('click','.product-container-footer input[type="submit"]',this.createNewProduct),this.attribute.disbalePredefinedAttribute(),a('body').trigger('dokan-product-editor-loaded',this)},saleSchedule:function(){var b=a(this).closest('.dokan-product-field-content','div, table');return a(this).hide(),b.find('.cancel_sale_schedule').show(),b.find('.sale_price_dates_fields').show(),!1},cancelSchedule:function(){var b=a(this).closest('.dokan-product-field-content','div, table');return a(this).hide(),b.find('.sale_schedule').show(),b.find('.sale_price_dates_fields').hide(),b.find('.sale_price_dates_fields').find('input').val(''),!1},checkProductPostboxToggle:function(){var b=JSON.parse(localStorage.getItem('toggleClasses'));a.each(b,function(e,f){var c=a('.'+e.replace(/_/g,'-')),d=c.find('.dokan-section-content'),b=c.find('i.fa-sort-desc');f?(d.show(),b.removeClass('fa-flip-horizointal').addClass('fa-flip-vertical'),b.css('marginTop','9px')):(d.hide(),b.removeClass('fa-flip-vertical').addClass('fa-flip-horizointal'),b.css('marginTop','0px'))})},toggleProductSection:function(d){var b,c;d.preventDefault(),b=a(this),JSON.parse(localStorage.getItem('toggleClasses'))!=null?(c=JSON.parse(localStorage.getItem('toggleClasses'))):(c={}),b.closest('.dokan-edit-row').find('.dokan-section-content').slideToggle(300,function(){var d;a(this).is(':visible')?(d=b.find('i.fa-sort-desc'),d.removeClass('fa-flip-horizointal').addClass('fa-flip-vertical'),d.css('marginTop','9px'),c[b.data('togglehandler')]=!0):(d=b.find('i.fa-sort-desc'),d.removeClass('fa-flip-vertical').addClass('fa-flip-horizointal'),d.css('marginTop','0px'),c[b.data('togglehandler')]=!1),localStorage.setItem('toggleClasses',JSON.stringify(c))})},loadSelect2:function(){a('.dokan-select2').select2({language:{noResults:function(){return dokan.i18n_no_result_found}}})},bindProductTagDropdown:function(){a(".product_tag_search").select2({allowClear:!1,tags:dokan.product_vendors_can_create_tags&&'on'===dokan.product_vendors_can_create_tags,ajax:{url:dokan.ajaxurl,dataType:'json',delay:250,data:function(a){return{q:a.term,action:'dokan_json_search_products_tags',security:dokan.search_products_tags_nonce,page:a.page||1}},processResults:function(c){var b=[];return c&&a.each(c,function(c,a){b.push({id:a[0],text:a[1]})}),{results:b,pagination:{more:b.length!=0}}},cache:!0},language:{errorLoading:function(){return dokan.i18n_searching},inputTooLong:function(a){var b=a.input.length-a.maximum;return 1===b?dokan.i18n_input_too_long_1:dokan.i18n_input_too_long_n.replace('%qty%',b)},inputTooShort:function(a){var b=a.minimum-a.input.length;return 1===b?dokan.i18n_input_too_short_1:dokan.i18n_input_too_short_n.replace('%qty%',b)},loadingMore:function(){return dokan.i18n_load_more},maximumSelected:function(a){return a.maximum===1?dokan.i18n_selection_too_long_1:dokan.i18n_selection_too_long_n.replace('%qty%',a.maximum)},noResults:function(){return dokan.i18n_no_matches},searching:function(){return dokan.i18n_searching}}})},addProductPopup:function(a){a.preventDefault(),b.openProductPopup()},openProductPopup:function(){var e=wp.template('dokan-add-new-product');a.magnificPopup.open({fixedContentPos:!0,items:{src:e().trim(),type:'inline'},callbacks:{open:function(){a(this.content).closest('.mfp-wrap').removeAttr('tabindex'),b.loadSelect2(),b.bindProductTagDropdown(),a('.sale_price_dates_from, .sale_price_dates_to').on('focus',function(){a(this).css('z-index','99999')}),a(".sale_price_dates_fields input").datepicker({defaultDate:"",dateFormat:"yy-mm-dd",numberOfMonths:1}),a('.tips').tooltip(),b.gallery.sortable(),a('body').trigger('dokan-product-editor-popup-opened',b)},close:function(){c=void 0,d=void 0}}})},createNewProduct:function(g){var d,c,e,f;if(g.preventDefault(),d=a(this),c=d.closest('form#dokan-add-new-product-form'),e=d.attr('data-btn_id'),c.find('span.dokan-show-add-product-error').html(''),c.find('span.dokan-add-new-product-spinner').css('display','inline-block'),d.attr('disabled','disabled'),c.find('input[name="post_title"]').val()==''){a('span.dokan-show-add-product-error').html(dokan.product_title_required),d.removeAttr('disabled'),c.find('span.dokan-add-new-product-spinner').css('display','none');return}if(c.find('select[name="product_cat"]').val()=='-1'){a('span.dokan-show-add-product-error').html(dokan.product_category_required),d.removeAttr('disabled'),c.find('span.dokan-add-new-product-spinner').css('display','none');return}f={action:'dokan_create_new_product',postdata:c.serialize(),_wpnonce:dokan.nonce},a.post(dokan.ajaxurl,f,function(f){f.success?(d.removeAttr('disabled'),e=='create_new'?(a.magnificPopup.close(),window.location.href=f.data):(a('.dokan-dashboard-product-listing-wrapper').load(window.location.href+' table.product-listing-table'),a.magnificPopup.close(),b.openProductPopup())):(d.removeAttr('disabled'),a('span.dokan-show-add-product-error').html(f.data)),c.find('span.dokan-add-new-product-spinner').css('display','none')})},attribute:{toggleAttribute:function(b){b.preventDefault();var c=a(this),e=c.closest('li'),d=e.find('.dokan-product-attribute-item');return a(d).hasClass('dokan-hide')?(c.closest('.dokan-product-attribute-heading').css({borderBottom:'1px solid #e3e3e3'}),a(d).slideDown(200,function(){c.find('i.fa').removeClass('fa-flip-horizointal').addClass('fa-flip-vertical'),a(this).removeClass('dokan-hide'),a(b.target).hasClass('dokan-product-attribute-heading')?a(b.target).hasClass('dokan-product-attribute-heading')&&c.find('a.dokan-product-toggle-attribute').css('top','12px'):a(b.target).closest('a').css('top','12px')})):a(d).slideUp(200,function(){a(this).addClass('dokan-hide'),c.find('i.fa').removeClass('fa-flip-vertical').addClass('fa-flip-horizointal'),a(b.target).hasClass('dokan-product-attribute-heading')?a(b.target).hasClass('dokan-product-attribute-heading')&&c.find('a.dokan-product-toggle-attribute').css('top','7px'):a(b.target).closest('a').css('top','7px'),c.closest('.dokan-product-attribute-heading').css({borderBottom:'none'})}),!1},sortable:function(){a('.dokan-product-attribute-wrapper ul').sortable({items:'li.product-attribute-list',cursor:'move',scrollSensitivity:40,forcePlaceholderSize:!0,forceHelperSize:!1,helper:'clone',opacity:.65,placeholder:'dokan-sortable-placeholder',start:function(b,a){a.item.css('background-color','#f6f6f6')},stop:function(b,a){a.item.removeAttr('style')},update:function(a,c){var d='';b.attribute.reArrangeAttribute()}})},dynamicAttrNameChange:function(d){d.preventDefault();var b=a(this),c=b.val();c==''?b.closest('li').find('strong').html('Attribute Name'):b.closest('li').find('strong').html(c)},selectAllAttr:function(b){return b.preventDefault(),a(this).closest('li.product-attribute-list').find('select.dokan_attribute_values option').attr('selected','selected'),a(this).closest('li.product-attribute-list').find('select.dokan_attribute_values').change(),!1},selectNoneAttr:function(b){return b.preventDefault(),a(this).closest('li.product-attribute-list').find('select.dokan_attribute_values option').removeAttr('selected'),a(this).closest('li.product-attribute-list').find('select.dokan_attribute_values').change(),!1},reArrangeAttribute:function(){var b=a('.dokan-product-attribute-wrapper').find('ul.dokan-attribute-option-list');b.find('li.product-attribute-list').css('cursor','default').each(function(b){a(this).find('.attribute_position').val(b)})},addNewExtraAttr:function(f){var b,d,c,e;f.preventDefault(),b=a(this).closest('li.product-attribute-list'),d=b.data('taxonomy'),c=window.prompt(dokan.new_attribute_prompt),c&&(e={action:'dokan_add_new_attribute',taxonomy:d,term:c,_wpnonce:dokan.nonce},a.post(dokan.ajaxurl,e,function(a){a.error?window.alert(a.error):a.slug&&(b.find('select.dokan_attribute_values').append('<option value="'+a.slug+'" selected="selected">'+a.name+'</option>'),b.find('select.dokan_attribute_values').change())}))},addNewAttribute:function(h){var c,d,e,f,g;h.preventDefault(),c=a(this),d=c.closest('.dokan-attribute-type').find('select#predefined_attribute'),e=d.val(),f=a('ul.dokan-attribute-option-list .product-attribute-list').length,g={action:'dokan_get_pre_attribute',taxonomy:e,i:f,_wpnonce:dokan.nonce},c.closest('.dokan-attribute-type').find('span.dokan-attribute-spinner').removeClass('dokan-hide'),a.post(dokan.ajaxurl,g,function(f){if(f.success){var g=a('.dokan-product-attribute-wrapper').find('ul.dokan-attribute-option-list');$html=a.parseHTML(f.data),a($html).find('.dokan-product-attribute-item').removeClass('dokan-hide'),a($html).find('i.fa.fa-sort-desc').removeClass('fa-flip-horizointal').addClass('fa-flip-vertical'),a($html).find('a.dokan-product-toggle-attribute').css('top','12px'),a($html).find('.dokan-product-attribute-heading').css({borderBottom:'1px solid #e3e3e3'}),g.append($html),a('select#product_type').trigger('change'),b.loadSelect2(),b.attribute.reArrangeAttribute()}c.closest('.dokan-attribute-type').find('span.dokan-attribute-spinner').addClass('dokan-hide'),e&&(d.find('option[value="'+e+'"]').attr('disabled','disabled'),d.val(''))})},removeAttribute:function(d){if(d.stopPropagation(),window.confirm(dokan.remove_attribute)){var c=a(this).closest('li.product-attribute-list');c.fadeOut(300,function(){c.is('.taxonomy')?(c.find('select, input[type=text]').val(''),a('select.dokan_attribute_taxonomy').find('option[value="'+c.data('taxonomy')+'"]').removeAttr('disabled')):(c.find('select, input[type=text]').val(''),c.hide()),b.attribute.reArrangeAttribute()})}return!1},saveAttribute:function(b){b.preventDefault();var d=a(this),c={post_id:a('#dokan-edit-product-id').val(),data:a('ul.dokan-attribute-option-list').find('input, select, textarea').serialize(),action:'dokan_save_attributes'};a('.dokan-product-attribute-wrapper').block({message:null,fadeIn:50,fadeOut:1e3,overlayCSS:{background:'#fff',opacity:.6}}),a.post(dokan.ajaxurl,c,function(b){a('#dokan-variable-product-options').load(window.location.toString()+' #dokan-variable-product-options-inner',function(){a('#dokan-variable-product-options').trigger('reload'),a('select#product_type').trigger('change'),a('.dokan-product-attribute-wrapper').unblock()})})},disbalePredefinedAttribute:function(){a('ul.dokan-attribute-option-list li.product-attribute-list').each(function(c,b){a(b).css('display')!=='none'&&a(b).is('.taxonomy')&&a('select#predefined_attribute').find('option[value="'+a(b).data('taxonomy')+'"]').attr('disabled','disabled')})}},inputValidate:function(b){if(b.preventDefault(),a('#post_title').val().trim()==''){a('#post_title').focus(),a('div.dokan-product-title-alert').removeClass('dokan-hide');return}if(a('div.dokan-product-title-alert').hide(),a('select.product_cat').val()==-1){a('select.product_cat').focus(),a('div.dokan-product-cat-alert').removeClass('dokan-hide');return}a('div.dokan-product-cat-alert').hide(),a('input[type=submit]').attr('disabled','disabled'),this.submit()},downloadable:function(){a(this).prop('checked')?a(this).closest('aside').find('.dokan-side-body').removeClass('dokan-hide'):a(this).closest('aside').find('.dokan-side-body').addClass('dokan-hide')},showDiscountSchedule:function(b){b.preventDefault(),a('.sale-schedule-container').slideToggle('fast')},showManageStock:function(b){a(this).is(':checked')?a('.show_if_stock').slideDown('fast'):a('.show_if_stock').slideUp('fast')},gallery:{addImages:function(d){d.preventDefault();var b=a(this),e=b.closest('.dokan-product-gallery').find('#product_images_container ul.product_images'),f=b.closest('.dokan-product-gallery').find('#product_image_gallery');if(c){c.open();return}c=wp.media({title:dokan.i18n_choose_gallery,button:{text:dokan.i18n_choose_gallery_btn_text},multiple:!0}),c.on('select',function(){var b=c.state().get('selection');b.map(function(b){b=b.toJSON(),b.id&&(attachment_ids=[],a('<li class="image" data-attachment_id="'+b.id+'">                                        <img src="'+b.url+'" />                                        <a href="#" class="action-delete">&times;</a>                                    </li>').insertBefore(e.find('li.add-image')),a('#product_images_container ul li.image').css('cursor','default').each(function(){var a=jQuery(this).attr('data-attachment_id');attachment_ids.push(a)}))}),f.val(attachment_ids.join(','))}),c.open()},deleteImage:function(e){var b,f,d,c;return e.preventDefault(),b=a(this),f=b.closest('.dokan-product-gallery').find('#product_images_container ul.product_images'),d=b.closest('.dokan-product-gallery').find('#product_image_gallery'),b.closest('li.image').remove(),c=[],a('#product_images_container ul li.image').css('cursor','default').each(function(){var b=a(this).attr('data-attachment_id');c.push(b)}),d.val(c.join(',')),!1},sortable:function(){a('body').find('#product_images_container ul.product_images').sortable({items:'li.image',cursor:'move',scrollSensitivity:40,forcePlaceholderSize:!0,forceHelperSize:!1,helper:'clone',opacity:.65,placeholder:'dokan-sortable-placeholder',start:function(b,a){a.item.css('background-color','#f6f6f6')},stop:function(b,a){a.item.removeAttr('style')},update:function(c,d){var b=[];a('body').find('#product_images_container ul li.image').css('cursor','default').each(function(){var a=jQuery(this).attr('data-attachment_id');b.push(a)}),a('body').find('#product_image_gallery').val(b.join(','))}})}},featuredImage:{addImage:function(c){c.preventDefault();var b=a(this);if(d){d.open();return}d=wp.media({title:dokan.i18n_choose_featured_img,button:{text:dokan.i18n_choose_featured_img_btn_text}}),d.on('select',function(){var a=d.state().get('selection');a.map(function(a){var d,c;a=a.toJSON(),b.siblings('input.dokan-feat-image-id').val(a.id),d=b.closest('.instruction-inside'),c=d.siblings('.image-wrap'),c.find('img').attr('src',a.url),c.find('img').removeAttr('srcset'),d.addClass('dokan-hide'),c.removeClass('dokan-hide')})}),d.open()},removeImage:function(e){var d,b,c;e.preventDefault(),d=a(this),b=d.closest('.image-wrap'),c=b.siblings('.instruction-inside'),c.find('input.dokan-feat-image-id').val('0'),b.addClass('dokan-hide'),c.removeClass('dokan-hide')}},fileDownloadable:function(c){c.preventDefault();var d=a(this),b;if(b){b.open();return}b=wp.media({title:dokan.i18n_choose_file,button:{text:dokan.i18n_choose_file_btn_text},multiple:!0}),b.on('select',function(){var a=b.state().get('selection');a.map(function(a){a=a.toJSON(),d.closest('tr').find('input.wc_file_url, input.wc_variation_file_url').val(a.url)})}),b.on('ready',function(){b.uploader.options.uploader.params={type:'downloadable_product'}}),b.open()}},d,c;a(function(){b.init(),a('select#product_type').change(function(){var b=a(this).val();'variable'===b&&(a('input#_manage_stock').change(),a('input#_downloadable').prop('checked',!1),a('input#_virtual').removeAttr('checked')),c(),a(document.body).trigger('dokan-product-type-change',b,a(this))}).change(),a('.product-edit-container').on('change','input#_downloadable, input#_virtual',function(){c()}).change(),a('input#_downloadable').change(),a('input#_virtual').change();function c(){var d=a('#product_type').val(),e=a('input#_virtual:checked').length,f=a('input#_downloadable:checked').length,b='.hide_if_downloadable, .hide_if_virtual',c='.show_if_downloadable, .show_if_virtual';a.each(Object.keys(dokan.product_types),function(d,a){b=b+', .hide_if_'+a,c=c+', .show_if_'+a}),a(b).show(),a(c).hide(),f&&a('.show_if_downloadable').show(),e&&a('.show_if_virtual').show(),a('.show_if_'+d).show(),f&&a('.hide_if_downloadable').hide(),e&&a('.hide_if_virtual').hide(),a('.hide_if_'+d).hide(),a('input#_manage_stock').change()}a('.sale_price_dates_fields').each(function(){var c=a(this),d=!1,b=c.closest('div, table');c.find('input').each(function(){''!==a(this).val()&&(d=!0)}),d?(b.find('.sale_schedule').hide(),b.find('.sale_price_dates_fields').show()):(b.find('.sale_schedule').show(),b.find('.sale_price_dates_fields').hide())}),a('.product-edit-container').on('click','.sale_schedule',function(){var b=a(this).closest('.product-edit-container, div.dokan-product-variation-itmes, table');return a(this).hide(),b.find('.cancel_sale_schedule').show(),b.find('.sale_price_dates_fields').show(),!1}),a('.product-edit-container').on('click','.cancel_sale_schedule',function(){var b=a('.product-edit-container, div.dokan-product-variation-itmes, table');return a(this).hide(),b.find('.sale_schedule').show(),b.find('.sale_price_dates_fields').hide(),b.find('.sale_price_dates_fields').find('input').val(''),!1});function d(b){let g=a('span.vendor-earning').attr('data-commission'),f=a('span.vendor-earning').attr('data-product-id'),c=a('input.dokan-product-regular-price').val(),d=a('input.dokan-product-sales-price').val(),e=a('.simple-product span.vendor-price');e.html('Calculating'),a.get(dokan.ajaxurl,{action:'get_vendor_earning',product_id:f,product_price:c,product_price:d||c,_wpnonce:dokan.nonce}).done(a=>{e.html(a),typeof b=='function'&&b()})}a("input.dokan-product-regular-price, input.dokan-product-sales-price").on('keyup',_.debounce(()=>{d(function(){(a('#product_type').val()=='simple'||a('#product_type').text()=='')&&(Number(a('.simple-product span.vendor-price').text())<0?(a(a('.dokan-product-less-price-alert').removeClass('dokan-hide')),a('input[type=submit]').attr('disabled','disabled'),a('button[type=submit]').attr('disabled','disabled')):(a(a('.dokan-product-less-price-alert').addClass('dokan-hide')),a('input[type=submit]').removeAttr('disabled'),a('button[type=submit]').removeAttr('disabled')))})},750));function e(b,c){var a=0;return function(){var d=this,e=arguments;clearTimeout(a),a=setTimeout(function(){b.apply(d,e)},c||0)}}})}(jQuery),jQuery(function(a){var e=wp.customize,b,d;a('.datepicker').datepicker({dateFormat:'yy-mm-dd'}),a('.dokan-start-date').datepicker({defaultDate:"",dateFormat:"yy-mm-dd",numberOfMonths:1,onSelect:function(c){let b=new Date(c);b.setDate(b.getDate()+1),a('.dokan-end-date').datepicker('option',{minDate:b})}}),a('.dokan-end-date').datepicker({defaultDate:"",dateFormat:"yy-mm-dd",numberOfMonths:1,onSelect:function(c){let b=new Date(c);b.setDate(b.getDate()-1),a('dokan-start-date').datepicker('option',{maxDate:b})}}),a('.tips').tooltip();function c(a,b,c){jQuery('<div class="chart-tooltip">'+c+'</div>').css({top:b-16,left:a+20}).appendTo("body").fadeIn(200)}b=null,d=null,jQuery(".chart-placeholder").bind("plothover",function(g,e,a){if(a){if(b!=a.dataIndex||d!=a.seriesIndex){if(b=a.dataIndex,d=a.seriesIndex,jQuery(".chart-tooltip").remove(),a.series.points.show||a.series.enable_tooltip){var f=a.series.data[a.dataIndex][1];tooltip_content='',a.series.prepend_label&&(tooltip_content=tooltip_content+a.series.label+": "),a.series.prepend_tooltip&&(tooltip_content=tooltip_content+a.series.prepend_tooltip),tooltip_content=tooltip_content+f,a.series.append_tooltip&&(tooltip_content=tooltip_content+a.series.append_tooltip),a.series.pie.show?c(e.pageX,e.pageY,tooltip_content):c(a.pageX,a.pageY,tooltip_content)}}}else jQuery(".chart-tooltip").remove(),b=null})}),function(a){var c,e,b,d,f,g;a.validator.setDefaults({ignore:":hidden"}),c=function(b,c){var d=a(c).closest('.dokan-form-group');d.addClass('has-error').append(b)},e=function(c,b){a(b).closest('.dokan-form-group').removeClass('has-error')},b=wp.customize,d={init:function(){var b=this;return a('a.dokan-banner-drag').on('click',this.imageUpload),a('a.dokan-remove-banner-image').on('click',this.removeBanner),a('a.dokan-pro-gravatar-drag').on('click',this.gragatarImageUpload),a('a.dokan-gravatar-drag').on('click',this.simpleImageUpload),a('a.dokan-remove-gravatar-image').on('click',this.removeGravatar),this.validateForm(b),!1},calculateImageSelectOptions:function(l,m){var a=parseInt(dokan.store_banner_dimension.width,10),c=parseInt(dokan.store_banner_dimension.height,10),j=!!parseInt(dokan.store_banner_dimension['flex-width'],10),k=!!parseInt(dokan.store_banner_dimension['flex-height'],10),e,h,i,g,f,d;return f=l.get('width'),g=l.get('height'),this.headerImage=new b.HeaderTool.ImageModel,this.headerImage.set({themeWidth:a,themeHeight:c,themeFlexWidth:j,themeFlexHeight:k,imageWidth:f,imageHeight:g}),m.set('canSkipCrop',!this.headerImage.shouldBeCropped()),e=a/c,h=f,i=g,h/i>e?(c=i,a=c*e):(a=h,c=a/e),d={handles:!0,keys:!0,instance:!0,persistent:!0,imageWidth:f,imageHeight:g,x1:0,y1:0,x2:a,y2:c},k===!1&&j===!1&&(d.aspectRatio=a+':'+c),k===!1&&(d.maxHeight=c),j===!1&&(d.maxWidth=a),d},onSelect:function(){this.frame.setState('cropper')},onCropped:function(a){var b=a.url,c=a.attachment_id,d=a.width,e=a.height;this.setImageFromURL(b,c,d,e)},onSkippedCrop:function(a){var b=a.get('url'),c=a.get('width'),d=a.get('height');this.setImageFromURL(b,a.id,c,d)},setImageFromURL:function(c,d,e,f){var b;a(this.uploadBtn).hasClass('dokan-banner-drag')?(b=a(this.uploadBtn).closest('.dokan-banner'),b.find('input.dokan-file-field').val(d),b.find('img.dokan-banner-img').attr('src',c),a(this.uploadBtn).parent().siblings('.image-wrap',b).removeClass('dokan-hide'),a(this.uploadBtn).parent('.button-area').addClass('dokan-hide')):a(this.uploadBtn).hasClass('dokan-pro-gravatar-drag')&&(b=a(this.uploadBtn).closest('.dokan-gravatar'),b.find('input.dokan-file-field').val(d),b.find('img.dokan-gravatar-img').attr('src',c),a(this.uploadBtn).parent().siblings('.gravatar-wrap',b).removeClass('dokan-hide'),a(this.uploadBtn).parent('.gravatar-button-area').addClass('dokan-hide'))},removeImage:function(){b.HeaderTool.currentHeader.trigger('hide'),b.HeaderTool.CombinedList.trigger('control:removeImage')},imageUpload:function(b){b.preventDefault();var c,a=d;a.uploadBtn=this,a.frame=wp.media({multiple:!1,button:{text:dokan.selectAndCrop,close:!1},states:[new wp.media.controller.Library({title:dokan.chooseImage,library:wp.media.query({type:'image'}),multiple:!1,date:!1,priority:20,suggestedWidth:dokan.store_banner_dimension.width,suggestedHeight:dokan.store_banner_dimension.height}),new wp.media.controller.Cropper({suggestedWidth:5e3,imgSelectOptions:a.calculateImageSelectOptions})]}),a.frame.on('select',a.onSelect,a),a.frame.on('cropped',a.onCropped,a),a.frame.on('skippedcrop',a.onSkippedCrop,a),a.frame.open()},calculateImageSelectOptionsProfile:function(l,m){var a=150,c=150,j=!!parseInt(dokan.store_banner_dimension['flex-width'],10),k=!!parseInt(dokan.store_banner_dimension['flex-height'],10),e,h,i,g,f,d;return f=l.get('width'),g=l.get('height'),this.headerImage=new b.HeaderTool.ImageModel,this.headerImage.set({themeWidth:a,themeHeight:c,themeFlexWidth:j,themeFlexHeight:k,imageWidth:f,imageHeight:g}),m.set('canSkipCrop',!this.headerImage.shouldBeCropped()),e=a/c,h=f,i=g,h/i>e?(c=i,a=c*e):(a=h,c=a/e),d={handles:!0,keys:!0,instance:!0,persistent:!0,imageWidth:f,imageHeight:g,x1:0,y1:0,x2:a,y2:c},k===!1&&j===!1&&(d.aspectRatio=a+':'+c),k===!1&&(d.maxHeight=c),j===!1&&(d.maxWidth=a),d},simpleImageUpload:function(d){d.preventDefault();var b,c=a(this);if(b){b.open();return}b=wp.media.frames.file_frame=wp.media({title:jQuery(this).data('uploader_title'),button:{text:jQuery(this).data('uploader_button_text')},multiple:!1}),b.on('select',function(){var d=b.state().get('selection').first().toJSON(),a=c.closest('.dokan-gravatar');a.find('input.dokan-file-field').val(d.id),a.find('img.dokan-gravatar-img').attr('src',d.url),c.parent().siblings('.gravatar-wrap',a).removeClass('dokan-hide'),c.parent('.gravatar-button-area').addClass('dokan-hide')}),b.open()},gragatarImageUpload:function(b){b.preventDefault();var c,a=d;a.uploadBtn=this,a.frame=wp.media({multiple:!1,button:{text:dokan.selectAndCrop,close:!1},states:[new wp.media.controller.Library({title:dokan.chooseImage,library:wp.media.query({type:'image'}),multiple:!1,date:!1,priority:20,suggestedWidth:150,suggestedHeight:150}),new wp.media.controller.Cropper({imgSelectOptions:a.calculateImageSelectOptionsProfile})]}),a.frame.on('select',a.onSelect,a),a.frame.on('cropped',a.onCropped,a),a.frame.on('skippedcrop',a.onSkippedCrop,a),a.frame.open()},submitSettings:function(c){typeof tinyMCE!='undefined'&&tinyMCE.triggerSave();var b=a("form#"+c),d=b.serialize()+'&action=dokan_settings&form_id='+c;b.find('.ajax_prev').append('<span class="dokan-loading"> </span>'),a.post(dokan.ajaxurl,d,function(c){b.find('span.dokan-loading').remove(),a('html,body').animate({scrollTop:100}),c.success?(a('.dokan-ajax-response').html(a('<div/>',{class:'dokan-alert dokan-alert-success',html:'<p>'+c.data.msg+'</p>'})),a('.dokan-ajax-response').append(c.data.progress)):a('.dokan-ajax-response').html(a('<div/>',{class:'dokan-alert dokan-alert-danger',html:'<p>'+c.data+'</p>'}))})},validateForm:function(b){a("form#settings-form, form#profile-form, form#store-form, form#payment-form").validate({submitHandler:function(a){b.submitSettings(a.getAttribute('id'))},errorElement:'span',errorClass:'error',errorPlacement:c,success:e,ignore:'.select2-search__field, :hidden, .mapboxgl-ctrl-geocoder--input'})},removeBanner:function(e){var c,b,d;e.preventDefault(),c=a(this),b=c.closest('.image-wrap'),d=b.siblings('.button-area'),b.find('input.dokan-file-field').val('0'),b.addClass('dokan-hide'),d.removeClass('dokan-hide')},removeGravatar:function(e){var c,b,d;e.preventDefault(),c=a(this),b=c.closest('.gravatar-wrap'),d=b.siblings('.gravatar-button-area'),b.find('input.dokan-file-field').val('0'),b.addClass('dokan-hide'),d.removeClass('dokan-hide')}},f={init:function(){var a=this;this.withdrawValidate(a)},withdrawValidate:function(b){a('form.withdraw').validate({errorElement:'span',errorClass:'error',errorPlacement:c,success:e})}},g={init:function(){this.validate(this)},validate:function(b){a('form#dokan-form-contact-seller').validate({errorPlacement:c,errorElement:'span',success:function(a,b){a.removeClass('error'),a.remove()},submitHandler:function(b){a(b).block({message:null,overlayCSS:{background:'#fff url('+dokan.ajax_loader+') no-repeat center',opacity:.6}});var c=a(b).serialize();a.post(dokan.ajaxurl,c,function(c){a(b).unblock(),typeof c.data!='undefined'&&a(b).find('.ajax-response').html(c.data),a(b).find('input[type=text], input[type=email], textarea').val('').removeClass('valid')})}})}},a(function(){d.init(),f.init(),g.init(),a('.dokan-form-horizontal').on('change','input[type=checkbox]#lbl_setting_minimum_quantity',function(){var b=a('.show_if_needs_sw_discount');a(this).is(':checked')?(b.find('input[type="number"]').val(''),b.slideDown('slow')):b.slideUp('slow')})})}(jQuery),function(a){var b=DokanValidateMsg;b.maxlength=a.validator.format(b.maxlength_msg),b.minlength=a.validator.format(b.minlength_msg),b.rangelength=a.validator.format(b.rangelength_msg),b.range=a.validator.format(b.range_msg),b.max=a.validator.format(b.max_msg),b.min=a.validator.format(b.min_msg),a.validator.messages=b,a(document).on('click','#dokan_store_tnc_enable',function(b){a(this).is(':checked')?a('#dokan_tnc_text').show():a('#dokan_tnc_text').hide()}).ready(function(b){a('#dokan_store_tnc_enable').is(':checked')?a('#dokan_tnc_text').show():a('#dokan_tnc_text').hide()})}(jQuery),function(a){function b(){var c=dokan.store_banner_dimension.width,b=dokan.store_banner_dimension.height/dokan.store_banner_dimension.width*a('#dokan-content').width();a('.profile-info-img.dummy-image').css({height:b})}b(),a(window).on('resize',function(a){b()}),a(':input.dokan-product-search').filter(':not(.enhanced)').each(function(){var d={allowClear:!!a(this).data('allow_clear'),placeholder:a(this).data('placeholder'),minimumInputLength:a(this).data('minimum_input_length')?a(this).data('minimum_input_length'):'3',escapeMarkup:function(a){return a},language:{errorLoading:function(){return dokan.i18n_searching},inputTooLong:function(a){var b=a.input.length-a.maximum;return 1===b?dokan.i18n_input_too_long_1:dokan.i18n_input_too_long_n.replace('%qty%',b)},inputTooShort:function(a){var b=a.minimum-a.input.length;return 1===b?dokan.i18n_input_too_short_1:dokan.i18n_input_too_short_n.replace('%qty%',b)},loadingMore:function(){return dokan.i18n_load_more},maximumSelected:function(a){return a.maximum===1?dokan.i18n_selection_too_long_1:dokan.i18n_selection_too_long_n.replace('%qty%',a.maximum)},noResults:function(){return dokan.i18n_no_matches},searching:function(){return dokan.i18n_searching}},ajax:{url:dokan.ajaxurl,dataType:'json',delay:250,data:function(b){return{term:b.term,action:a(this).data('action')||'dokan_json_search_products_and_variations',security:dokan.search_products_nonce,exclude:a(this).data('exclude'),user_ids:a(this).data('user_ids'),include:a(this).data('include'),limit:a(this).data('limit')}},processResults:function(b){var c=[];return b&&a.each(b,function(a,b){c.push({id:a,text:b})}),{results:c}},cache:!0}},b,c;a(this).select2(d).addClass('enhanced'),a(this).data('sortable')&&(b=a(this),c=a(this).next('.select2-container').find('ul.select2-selection__rendered'),c.sortable({placeholder:'ui-state-highlight select2-selection__choice',forcePlaceholderSize:!0,items:'li:not(.select2-search__field)',tolerance:'pointer',stop:function(){a(c.find('.select2-selection__choice').get().reverse()).each(function(){var c=a(this).data('data').id,d=b.find('option[value="'+c+'"]')[0];b.prepend(d)})}}))});var c={init:function(){selected_items=[],a('#cb-select-all').on('change',function(d){var c=a(this),b=a('.cb-select-items');c.is(':checked')?b.each(function(d,b){var c=a(b);c.prop('checked','checked')}):b.each(function(c,b){a(b).prop('checked',''),selected_items.pop()})})}};c.init(),a('.product-cat-stack-dokan li.has-children').on('click','> a span.caret-icon',function(d){d.preventDefault();var b=a(this),c=b.closest('li.has-children');c.find('> ul.children').is(':visible')||(b.find('i.fa').addClass('fa-rotate-90'),c.find('> ul.children').hasClass('level-0')&&b.closest('a').css({borderBottom:'none'})),c.find('> ul.children').slideToggle('fast',function(){a(this).is(':visible')||(b.find('i.fa').removeClass('fa-rotate-90'),c.find('> ul.children').hasClass('level-0')&&b.closest('a').css({borderBottom:'1px solid #eee'}))})}),a('.store-cat-stack-dokan li.has-children').on('click','> a span.caret-icon',function(d){d.preventDefault();var b=a(this),c=b.closest('li.has-children');c.find('> ul.children').is(':visible')||(b.find('i.fa').addClass('fa-rotate-90'),c.find('> ul.children').hasClass('level-0')&&b.closest('a').css({borderBottom:'none'})),c.find('> ul.children').slideToggle('fast',function(){a(this).is(':visible')||(b.find('i.fa').removeClass('fa-rotate-90'),c.find('> ul.children').hasClass('level-0')&&b.closest('a').css({borderBottom:'1px solid #eee'}))})}),a(document).ready(function(){var b=a('#cat-drop-stack ul').find('a.selected');b.css({fontWeight:'bold'}),b.parents('ul.children').each(function(c,b){a(b).css({display:'block'})})})}(jQuery),function(a){a(document.body).on('wc_add_error_tip',function(e,b,c){var d=b.position();b.parent().find('.wc_error_tip').length===0&&(b.after('<div class="wc_error_tip '+c+'">'+dokan[c]+'</div>'),b.parent().find('.wc_error_tip').css('left',d.left+b.width()-b.width()/2-a('.wc_error_tip').width()/2).css('top',d.top+b.height()).fadeIn('100'))}).on('wc_remove_error_tip',function(d,b,c){b.parent().find('.wc_error_tip.'+c).fadeOut('100',function(){a(this).remove()})}).on('click',function(){a('.wc_error_tip').fadeOut('100',function(){a(this).remove()})}).on('blur','.wc_input_decimal[type=text], .wc_input_price[type=text], .wc_input_country_iso[type=text]',function(){a('.wc_error_tip').fadeOut('100',function(){a(this).remove()})}).on('change','.wc_input_price[type=text], .wc_input_decimal[type=text], .wc-order-totals #refund_amount[type=text]',function(){var c,d,b=dokan.decimal_point,e,f;(a(this).is('.wc_input_price')||a(this).is('#refund_amount'))&&(b=dokan.mon_decimal_point),c=new RegExp('[^-0-9%\\'+b+']+','gi'),d=new RegExp('\\'+b+'+','gi'),e=a(this).val(),f=e.replace(c,'').replace(d,b),e!==f&&a(this).val(f)}).on('keyup','.wc_input_price[type=text], .wc_input_decimal[type=text], .wc_input_country_iso[type=text], .wc-order-totals #refund_amount[type=text]',function(){var f=!1,b,d,c,g,e;a(this).is('.wc_input_price')||a(this).is('#refund_amount')?(f=!0,c=new RegExp('[^-0-9%\\'+dokan.mon_decimal_point+']+','gi'),d=new RegExp('[^\\'+dokan.mon_decimal_point+']','gi'),b='i18n_mon_decimal_error'):a(this).is('.wc_input_country_iso')?(c=new RegExp('([^A-Z])+|(.){3,}','im'),b='i18n_country_iso_error'):(f=!0,c=new RegExp('[^-0-9%\\'+dokan.decimal_point+']+','gi'),d=new RegExp('[^\\'+dokan.decimal_point+']','gi'),b='i18n_decimal_error'),g=a(this).val(),e=g.replace(c,''),f&&1<e.replace(d,'').length&&(e=e.replace(d,'')),g!==e?a(document.body).triggerHandler('wc_add_error_tip',[a(this),b]):a(document.body).triggerHandler('wc_remove_error_tip',[a(this),b])}).on('change','#_sale_price.wc_input_price[type=text], .wc_input_price[name^=variable_sale_price]',function(){var b=a(this),c,d,e;b.attr('name').indexOf('variable')!==-1?c=b.parents('.variable_pricing').find('.wc_input_price[name^=variable_regular_price]'):c=a('#_regular_price'),d=parseFloat(window.accounting.unformat(b.val(),dokan.mon_decimal_point)),e=parseFloat(window.accounting.unformat(c.val(),dokan.mon_decimal_point)),d>=e&&a(this).val('')}).on('keyup','#_sale_price.wc_input_price[type=text], .wc_input_price[name^=variable_sale_price]',function(){var b=a(this),c,d,e;b.attr('name').indexOf('variable')!==-1?c=b.parents('.variable_pricing').find('.wc_input_price[name^=variable_regular_price]'):c=a('#_regular_price'),d=parseFloat(window.accounting.unformat(b.val(),dokan.mon_decimal_point)),e=parseFloat(window.accounting.unformat(c.val(),dokan.mon_decimal_point)),d>=e?a(document.body).triggerHandler('wc_add_error_tip',[a(this),'i18n_sale_less_than_regular_error']):a(document.body).triggerHandler('wc_remove_error_tip',[a(this),'i18n_sale_less_than_regular_error'])}).on('init_tooltips',function(){a('.tips, .help_tip, .woocommerce-help-tip').tipTip({attribute:'data-tip',fadeIn:50,fadeOut:50,delay:200}),a('.column-wc_actions .wc-action-button').tipTip({fadeIn:50,fadeOut:50,delay:200}),a('.parent-tips').each(function(){a(this).closest('a, th').attr('data-tip',a(this).data('tip')).tipTip({attribute:'data-tip',fadeIn:50,fadeOut:50,delay:200}).css('cursor','help')})})}(jQuery),function(a){var b={query:{},form:null,cateItemStringArray:[],init:function(){a('#dokan-store-listing-filter-wrap .sort-by #stores_orderby').on('change',this.buildSortByQuery),a('#dokan-store-listing-filter-wrap .toggle-view span').on('click',this.toggleView),a('#dokan-store-listing-filter-wrap .dokan-store-list-filter-button, #dokan-store-listing-filter-wrap .dokan-icons, #dokan-store-listing-filter-form-wrap .apply-filter #cancel-filter-btn ').on('click',this.toggleForm),a('#dokan-store-listing-filter-form-wrap .store-search-input').on('change',this.buildSearchQuery),a('#dokan-store-listing-filter-form-wrap .apply-filter #apply-filter-btn').on('click',this.submitForm),this.maybeHideListView();const c=b;c.form=document.forms.dokan_store_lists_filter_form;const e=c.getLocal('dokan-layout');if(e){const b=a('.toggle-view span');c.setView(e,b)}const d=c.getParams();if(d.length){let b=!1;d.forEach(function(a){const e=Object.keys(a),f=Object.values(a);(!e.includes('stores_orderby')||d.length>1)&&(b=!0),c.setParams(e,f)}),b&&a('#dokan-store-listing-filter-form-wrap').slideToggle()}},buildSortByQuery:function(a){const c=b;c.query.stores_orderby=a.target.value,c.submitForm(a)},toggleView:function(f){const c=b,d=a(f.target),g=d.parent().find('span'),e=d.data('view');c.setView(e,g),c.setLocal('dokan-layout',e)},setView:function(b,c){if(typeof b=='undefined'||b.length<1||typeof c=='undefined'||c.length<1)return;const d=a('#dokan-seller-listing-wrap');[...c].forEach(function(e){const c=a(e);b===c.data('view')?(c.addClass('active'),d.addClass(b)):(c.removeClass('active'),d.removeClass(c.data('view')))})},toggleForm:function(b){b.preventDefault(),a('#dokan-store-listing-filter-form-wrap').slideToggle()},buildSearchQuery:function(a){a.target.value?b.query.dokan_seller_search=a.target.value:delete b.query.dokan_seller_search},submitForm:function(c){c.preventDefault();const d=decodeURIComponent(a.param(b.query));window.history.pushState(null,null,`?${d}`),window.location.reload()},setLocal:function(a,b){window.localStorage.setItem(a,b)},getLocal:function(a){return window.localStorage.getItem(a)},setParams:function(c,d){const e=b,g=e.form?e.form.elements:'',f=document.forms.stores_sorting,h=f?f.elements:'';Object.values(h).forEach(function(b){b.name===c[0]&&a(b).val(d[0])}),Object.values(g).forEach(function(b){if(c.includes(b.name)&&(b.type==='checkbox'?b.checked=!!['yes','true','1'].includes(d[0]):['text','search'].includes(b.type)&&(b.value=d[0])),c[0].includes('store_categories[')||c[0].includes('store_category[')){const c=d[0].split(' ').join('-'),b=a(`[data-slug=${c}]`);e.cateItemStringArray.includes(b.text().trim())||e.cateItemStringArray.push(b.text().trim()),b.addClass('dokan-btn-theme')}else if(c[0]==='rating'){const b=d[0].split(' ').join('-');a(`[data-${c[0]}=${b}]`).addClass('active'),a(`[data-rating=${b}]`).parent().addClass('selected')}}),c.forEach(function(a,b){a.includes('[')||(e.query[a]=d[b])})},getParams:function(){const b=new URLSearchParams(location.search),a=[];return b.forEach(function(b,c){a.push({[c]:b})}),a},maybeHideListView:function(){const c=b;window.matchMedia('(max-width: 767px)').matches&&'list-view'===c.getLocal('dokan-layout')&&c.setLocal('dokan-layout','grid-view'),a(window).on('resize',function(){const b=a(this);b.width()<767?(a('#dokan-seller-listing-wrap').removeClass('list-view'),a('#dokan-seller-listing-wrap').addClass('grid-view')):(a('.toggle-view.item span').last().removeClass('active'),a('.toggle-view.item span').first().addClass('active'))})}};window.dokan&&(window.dokan.storeLists=b,window.dokan.storeLists.init())}(jQuery)